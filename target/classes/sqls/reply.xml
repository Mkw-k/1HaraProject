<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Reply">
	
	<!-- 댓글 입력 -->
	<insert id="insertReply">
		INSERT INTO REPLY (REPLYSEQ, JOBTALKSEQ, REPLY_CONTENT, MEMBERID, RDATE, UDATE, DEL)
		VALUES(REPLYSEQ_REPLY.NEXTVAL, #{jobtalkseq}, #{reply_content}, #{memberid}, SYSDATE, #{udate}, 0)		
	</insert>
	<select id="listReply" resultType="bit.com.a.dto.replyDto">
		SELECT REPLYSEQ, JOBTALKSEQ, REPLY_CONTENT, MEMBERID, R.RDATE, R.UDATE, DEL
		FROM REPLY R, MEMBER M
		WHERE R.MEMBERID = M.MEMBERID AND JOBTALKSEQ=#{jobtalkseq}
		ORDER BY REPLYSEQ
	</select>
	<update id="reply_count" parameterType="java.lang.Integer">
		UPDATE REPLY
		SET REPLY_COUNT=REPLY_COUNT+1
		WHERE REPLYSEQ=#{replyseq}
	</update>

</mapper>  